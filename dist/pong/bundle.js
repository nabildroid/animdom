(()=>{"use strict";var t,i,e,s=function(){},o=[];function n(){clearInterval(i)}function h(t){s=t}function r(t){n(),i=setInterval((function(){s()}),1e3/t)}function l(t,i,e){var s=(t.style.transform||"").split(/\) /gm),o=!1;s=s.map((function(t){return t.length&&")"!=t.charAt(t.length-1)&&(t+=")"),-1!=t.indexOf(i)?(o=!0,i+"("+e+")"):t})),o||s.push(i+"("+e+")"),t.style.transform=s.join(" ").trim()}function p(t){window.addEventListener("keydown",(function(i){return t(i.keyCode||i.which,i)}))}const a=function(){function i(t,i){void 0===t&&(t="div"),this.initParent(i&&i.parent),"object"==typeof this.parent?(this.elm=document.createElement(t),this.elm.style.opacity="1",this.parent.appendChild(this.elm)):this.elm=document.querySelector(this.parent),"input"==t&&this.elm.setAttribute("type","text"),this.isCircle=!1,this.x=0,this.y=0,this._width=0,this._height=0}return i.prototype.initParent=function(e){void 0===e&&(e=null),this.parent=e||(t instanceof i?t.elm:document.body)},i.prototype.elmType=function(){return this.elm instanceof HTMLDivElement?"div":this.elm instanceof HTMLInputElement?"input":null},i.prototype.style=function(t){return window.getComputedStyle(this.elm).getPropertyValue(t)},i.prototype.hide=function(){return this.elm.style.display="none",this},i.prototype.show=function(){return this.elm.style.display="block",this},i.prototype.text=function(t,i,e,s){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===e&&(e=null),void 0===s&&(s=null),this.elm instanceof HTMLInputElement?this.elm.value=t:this.elm.innerText=t,i&&(this.elm.style.color=i),e&&(this.elm.style.fontSize="number"==typeof e?e+"px":e),s&&(this.elm.style.textAlign=s),t||i||e||s?this:{value:this.elm instanceof HTMLInputElement?this.elm.value:this.elm.innerText,color:this.elm.style.color||void 0,size:this.elm.style.fontSize||void 0,dir:this.elm.style.textAlign||void 0}},i.prototype.bg_color=function(t){return t?(this.elm.style.background=t,this):this.elm.style.background},i.prototype.width=function(){return this._width},i.prototype.setWidth=function(t,i,e){var s=this;if(void 0===i&&(i=null),void 0===e&&(e="px"),t&&!i)return this.elm.style.width="number"==typeof t?t+"px":t,this._width=this.elm.offsetWidth,this;if(t&&i){var o=this.style("transition");this.elm.style.transition="none";var n=parseFloat(this.elm.style.width),h=50*(t-n)/i;return new Promise((function(i,r){var l=function(){n+=h;try{if(Math.floor(n)>Math.floor(t)&&h>0||Math.floor(n)<Math.floor(t)&&h<0)return s.elm.style.transition=o,i(s),!0;s.elm.style.width=n+e,s._width=s.elm.offsetWidth,setTimeout(l,50)}catch(t){r(t)}};l()}))}},i.prototype.height=function(){return this._height},i.prototype.setHeight=function(t,i,e){var s=this;if(void 0===i&&(i=null),void 0===e&&(e="px"),t&&!i)return this.elm.style.height="number"==typeof t?t+"px":t,this._height=this.elm.offsetHeight,this;if(t&&i){var o=this.style("transition");this.elm.style.transition="none";var n=parseFloat(this.elm.style.height),h=50*(t-n)/i;return new Promise((function(i,r){var l=function(){n+=h;try{if(Math.floor(n)>Math.floor(t)&&h>0||Math.floor(n)<Math.floor(t)&&h<0)return s.elm.style.transition=o,i(s),!0;s.elm.style.height=n+e,s._height=s.elm.offsetHeight,setTimeout(l,50)}catch(t){r(t)}};l()}))}},i.prototype.size=function(t,i){return void 0===t&&(t=0),i||(i=t),this.elm.style.width="number"==typeof t?t+"px":t,this.elm.style.height="number"==typeof i?i+"px":i,this._width=this.elm.offsetWidth,this._height=this.elm.offsetHeight,this},i.prototype.border=function(t,i,e){var s=this;if("object"==typeof e)e.forEach((function(e){var o="";1==e?o="-top":4==e?o="-left":3==e?o="-bottom":2==e&&(o="-right"),s.elm.style["border"+o]=("number"==typeof t?t+"px":t)+" solid "+i}));else{var o="";1==e?o="-top":4==e?o="-left":3==e?o="-bottom":2==e&&(o="-right"),this.elm.style["border"+o]=("number"==typeof t?t+"px":t)+" solid "+i}return this},i.prototype.circle=function(){return this.isCircle=!0,this.elm.style.borderRadius="200em",this},i.prototype.free=function(){return this.elm.style.position="absolute",this},i.prototype.box=function(){return this.elm.style.overflow="hidden",this},i.prototype.top=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=0),!1===t?this.y:"number"==typeof t?(this.y=t+(i?this.y:0),l(this.elm,"translate",this.x+"px,"+this.y+"px"),this):void 0},i.prototype.left=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=0),!1===t?this.x:"number"==typeof t?(this.x=t+(i?this.x:0),l(this.elm,"translate",this.x+"px,"+this.y+"px"),this):void 0},i.prototype.center=function(t){var i=this.height(),e=this.width();return this.top(t.height()/2-i/2),this.left(t.width()/2-e/2),this},i.prototype.rotate=function(t){return l(this.elm,"rotate",t+"deg"),this},i.prototype.axe_center=function(t){return void 0===t&&(t=null),this.elm.style.transformOrigin=t||"0 0",this},i.prototype.attr=function(t,i){return void 0===i&&(i=null),i?(this.elm.setAttribute(t,i),this):this.elm.getAttribute(t)},i.prototype.onclick=function(t){var i=this;this.elm.addEventListener("click",(function(){return t(i)}))},i.prototype.ondclick=function(t){var i=this;this.elm.addEventListener("ondblclick",(function(){return t(i)}))},i.prototype.onmouseout=function(t){var i=this;this.elm.addEventListener("onmouseleave",(function(){return t(i)}))},i.prototype.onchange=function(t){var i=this;this.elm.addEventListener("onchange",(function(){return t(i)}))},i.prototype.remove=function(){this.elm.remove()},i}();var c=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.abc=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mult=function(t){return"object"==typeof t?this.x*t.y-this.y*t.x:(this.x*=t,this.y*=t,this)},t.prototype.div=function(t){return this.x/="object"==typeof t?t.x||1:t||1,this.y/="object"==typeof t?t.y||1:t||1,this},t.prototype.mag=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.normalise=function(){var t=this.mag();return t&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.setMag=function(t){return this.normalise(),this.x*=t,this.y*=t,this},t.prototype.update=function(t,i){return this.x=t,this.y=i,this},t.prototype.get=function(){return new t(this.x,this.y)},t.prototype.limit=function(t){var i=this.mag();return this.x=f(this.x,0,i,0,t)||this.x,this.y=f(this.y,0,i,0,t)||this.y,this},t.prototype.angle=function(t){var i=this.get().abc(t),e=0;return i.x?e=Math.acos(i.x/i.mag())*(180/Math.PI):i.y&&(e=Math.asin(i.y/i.mag())*(180/Math.PI)),this.y-t.y<0&&this.x-t.x<0&&(e+=2*(180-e)),this.y-t.y<0&&this.x-t.x>0&&(e=360-e),e},t}();function u(t,i,e,s){return Math.sqrt(Math.pow(e-t,2)+Math.pow(s-i,2))}function f(t,i,e,s,o){return 100*(t-i)/(e-i)*(o-s)/100+s}function y(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s,o=e?function(t){return parseFloat(t)}:function(t){return Math.floor(t)};if("object"!=typeof t&&t<i){var n=i;i=t,t=n}var h=i<0&&(i||1),r=t<0&&(t||1);if(t="object"!=typeof t?Math.abs(t):t,i=Math.abs(i),!t)return 0;if("object"==typeof t)s=t[y(t.length-1)];else if(!r&&!h||r&&h){for(;!((s=o(Math.random()*(t+1)+i))<=t&&s>=i););r&&h&&(s*=-1)}else if(r&&0==i)s=-1*o(Math.random()*(t+1));else if(!r&&h){var l=y(t,void 0,e),p=y(i,void 0,e);s=y(1)?l:-p}return s}const m=function(){function t(t,i,e,s){this.size=i,this.pos=t,this.color=s,this.mass=e,this.vol=new c(0,0),this.acc=new c(0,0)}return t.prototype.createElm=function(){this.elm=new a,this.elm.free().size(this.size.x,this.size.y),this.elm.bg_color(this.color),this.updateElm()},t.prototype.updateElm=function(){this.elm.top(this.pos.y-this.size.y/2),this.elm.left(this.pos.x-this.size.x/2)},t.prototype.updatePhysic=function(){this.vol.add(this.acc),this.pos.add(this.vol),this.acc.mult(0)},t.prototype.calcCollision=function(t,i){var e=(this.mass-t)/(this.mass+t),s=2*t/(this.mass+t);return this.vol.get().mult(e).add(i.get().mult(s))},t.prototype.applyForce=function(t){this.acc.add(t.div(this.mass))},t}();var d,v=(d=function(t,i){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}d(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),x=function(t){function i(i,e,s){var o=t.call(this,i,e,s,"#ddd")||this;return o.createElm(),o.currentVol=0,o.maxYVol=15,o}return v(i,t),i.prototype.update=function(){if(this.updatePhysic(),this.vol.y=this.currentVol,Math.abs(this.currentVol)>0){var t=this.currentVol>0?-1:1;this.currentVol+=t}else this.currentVol=0;this.updateElm()},i.prototype.move=function(t){console.log(t),(Math.abs(this.currentVol)<1||this.currentVol*t>0)&&(this.currentVol=this.maxYVol*t)},i}(m),g=function(t){function i(i,e,s,o){var n=t.call(this,i,new c(s,s),o,"#ccc")||this;return n.initialVol=e,n.vol=e.get(),n.createElm(),n.elm.circle(),n}return v(i,t),i.prototype.update=function(){this.updatePhysic(),this.updateElm()},i.prototype.collision=function(t){var i=this.calcCollision(t.mass,t.vol);this.pos.add(i.setMag(1)),this.vol=i,this.vol.setMag(this.initialVol.mag())},i}(m);function w(t,i){var e=.5;if(t.pos.x-t.size.x*e<=i.pos.x+i.size.x*e&&t.pos.x+t.size.x*e>=i.pos.x-i.size.x*e&&t.pos.y-t.size.y*e<=i.pos.y+i.size.y*e&&t.pos.y+t.size.y*e>=i.pos.y-i.size.y*e)return!0}(function(){function i(i,e,s){void 0===e&&(e=0);var o=s.c,n=void 0===o?"#000":o,h=s.r,r=void 0===h?0:h;"object"==typeof i?(this.r=i.r||r,this.pos=i.pos.get(),this.color=i.color||n):(this.r=r,this.pos=new c(i,e),this.color=n),this.zoom=!0,this.parent=new Array,this.use=!0,this.r>0&&(this.elm=new a("div",{parent:t.elm}),this.elm.free().top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2),this.elm.circle().size(this.r,this.r).bg_color(this.color))}i.prototype.update=function(t){if(this.pos.x=t[0]||1,this.pos.y=t[1]||1,this.pos.x=this.pos.x,this.pos.y=this.pos.y,this.elm&&(this.elm.top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2)),this.parent)for(var i=0;i<this.parent.length;i++)this.parent[i].update()},i.prototype.state=function(t,i,e,s){void 0===t&&(t=!1),void 0===e&&(e=0),void 0===s&&(s="#000"),this.use=t,t?(this.pos.x=i,this.pos.y=e,this.color=s,this.pos.x=i,this.pos.y=e,this.parent=new Array,this.r>0&&(this.elm.elm.style.display="block",this.elm.top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2),this.elm.bg_color(this.color))):(this.elm.top(0),this.elm.left(0),this.elm.elm.style.display="none")}})(),function(){function i(i,e,s,o){void 0===s&&(s=0),void 0===o&&(o="#000"),this.object,this.spot1=i,this.spot2=e,this.spot1.parent.push(this),this.spot2.parent.push(this),this.size=s,this.color=o,this.length=u(this.spot1.pos.x,this.spot1.pos.y,this.spot2.pos.x,this.spot2.pos.y),this.angle=0,this.axe=this.spot1.pos.mag()>this.spot2.pos.mag()?this.spot2:this.spot1,this.AntiAxe=this.axe==this.spot1?this.spot2:this.spot1,this.calc_angle(),this.size&&(this.elm=new a("div",{parent:t.elm}),this.elm.free().top(this.axe.pos.y+this.axe.r/2-this.size/2),this.elm.left(this.axe.pos.x+this.axe.r/2-this.size/2),this.elm.size(this.length,this.size).bg_color(this.color),this.elm.axe_center().rotate(this.angle))}i.prototype.calc_angle=function(){this.length=u(this.spot1.pos.x,this.spot1.pos.y,this.spot2.pos.x,this.spot2.pos.y),this.angle=this.AntiAxe.pos.angle(this.axe.pos)},i.prototype.update=function(){this.calc_angle(),this.size&&(this.elm.free().top(this.axe.pos.y+this.axe.r/2-this.size/2),this.elm.left(this.axe.pos.x+this.axe.r/2-this.size/2),this.elm.size(this.length,this.size).bg_color(this.color),this.elm.axe_center().rotate(this.angle))},i.prototype.width=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=0),i&&(t+=this.length),e)s=Math.cos(180-(this.angle*(Math.PI/180)+90))*t,o=Math.sin(180-(this.angle*(Math.PI/180)+90))*t,this.spot1.update([s,o]);else{var s=Math.cos(this.angle*(Math.PI/180))*t+this.spot1.pos.x,o=Math.sin(this.angle*(Math.PI/180))*t+this.spot1.pos.y;this.spot2.update([s,o])}this.length=t},i.prototype.rotate=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=this.axe),void 0===e&&(e=0),"number"==typeof i&&(i=1==i?this.axe:this.AntiAxe);var s=i==this.axe?this.AntiAxe:this.axe;this.calc_angle(),e&&(t+=this.angle),i==this.AntiAxe&&(t+=180);var o=t*(Math.PI/180),n=Math.cos(o)*this.length,h=Math.sin(o)*this.length;this.angle=t,s.update([n+i.pos.x,h+i.pos.y])},i.prototype.remove=function(){this.elm.remove()}}(),function(){function i(t,i,e,s,o){this.elm=null,this.angle=null,"object"==typeof t?(this.pos=t,this.w=i,this.h=e,"string"==typeof s&&(this.color=s)):(this.pos=new c(t,i),this.w=e,"number"==typeof s&&(this.h=s),this.color=o),this.color&&this.show()}i.prototype.show=function(){this.elm=new a("div",{parent:t.elm}),this.elm.free().top(this.pos.y-this.h/2),this.elm.left(this.pos.x-this.w/2),this.elm.axe_center(this.w/2+"px "+this.h/2+"px"),this.elm.border(this.w/2,"transparent",[2,4]).border(this.h,this.color,[3])},i.prototype.update=function(t){this.calc_angle(t),this.elm&&this.elm.rotate(this.angle),this.pos.x=t[0],this.pos.y=t[1],this.elm&&(this.elm.top(this.pos.y-this.h/2||0),this.elm.left(this.pos.x-this.w/2||0))},i.prototype.calc_angle=function(t){var i=new c(t[0],t[1]);if((i=this.pos.get().abc(i.get())).mag()){var e=Math.abs(Math.acos(i.y/i.mag())*(180/Math.PI));t[0]-this.pos.x<0&&(e=360-e),this.angle=e}}}();var b,M,z,_,E=[];function A(t){38==t?_.move(-1):40==t?_.move(1):13==t?n():function(){if(o.length)for(var t=0;t<o.length;t++)o[t].remove()}()}p(A),function(t){window.addEventListener("touchstart",(function(t){e=t.touches[0]}),!1),window.addEventListener("touchmove",function(i){var s=i.touches[0];e&&(s.clientY!=e.clientY&&Math.abs(s.clientY-e.clientY)>10?t(s.clientY-e.clientY<0?38:40):s.clientX!=e.clientX&&Math.abs(s.clientX-e.clientX)>10&&t(s.clientX-e.clientX<0?37:39))}.bind(this),!1),window.addEventListener("touchend",(function(t){e=null}),!1)}(A),function(t,i){document.addEventListener("DOMContentLoaded",(function(e){t(),h(i),r(60),p((function(t){27==t&&n()}))}))}((function(){var i=(b=function(i,e){void 0===e&&(e="#fff");var s=new a;return s.free(),s.box(),s.bg_color(e),"object"==typeof i?s.size(i[0],i[1]):i?s.size(i,i):s.size("100%","100%"),function(i){t=i}(s),s}("100%","#333")).height()/2,e=new c(20,300);_=new x(new c(30,i),e,1e3),z=new x(new c(b.width()-30,i),e,1e3),E=Array(5).fill(null).map((function(){var t=new c(y(10,100),y(10,100));return new x(new c(y(b.width()),y(b.height())),t,t.mag())}));var s=new c(-10,0);M=new g(new c(b.width()/2,b.height()/2),s,30,1)}),(function(){M.update(),z.update(),_.update(),[z,_].forEach((function(t,i){w(t,M)&&M.collision(t)})),E.forEach((function(t,i){w(t,M)&&(M.collision(t),t.elm.remove(),E.splice(i,1))})),(M.pos.x<=35||M.pos.x>=b.width()-35)&&(M.pos.x=b.width()/2,M.pos.y=b.height()/2,M.vol=new c(y(100),y(100)).setMag(M.initialVol.mag())),(M.pos.y-M.size.y/2<=0||M.pos.y+M.size.y/2>=b.height())&&(M.vol.y*=-1);var i=M.pos.get().abc(z.pos).mag();if(i>3*z.size.x&&i<.5*b.width()){var e=M.pos.y-z.pos.y>0?1:-1;z.move(e)}(i=M.pos.get().abc(_.pos).mag())>3*_.size.x&&i<.5*b.width()&&(e=M.pos.y-_.pos.y>0?1:-1),function(i,e,s,n,h){void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=1),void 0===n&&(n="#000"),void 0===h&&(h="");var r=new a("div",{parent:t.elm});r.free().top(e),r.left(i),r.bg_color(n),r.size(s,s).circle(),o.push(r)}(f((z.pos.y+_.pos.y)/2,0,b.height(),0,b.width()),M.pos.y,f(M.pos.get().abc(new c(b.width()/2,b.height()/2)).mag(),0,b.width()/2,15,2),"#cddc39")}))})();