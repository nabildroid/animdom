(()=>{"use strict";var t,i,e=function(){};function s(){clearInterval(i)}function o(t){e=t}function h(t){s(),i=setInterval((function(){e()}),1e3/t)}function n(t,i,e){var s=(t.style.transform||"").split(/\) /gm),o=!1;s=s.map((function(t){return t.length&&")"!=t.charAt(t.length-1)&&(t+=")"),-1!=t.indexOf(i)?(o=!0,i+"("+e+")"):t})),o||s.push(i+"("+e+")"),t.style.transform=s.join(" ").trim()}var r=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.abc=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mult=function(t){return"object"==typeof t?this.x*t.y-this.y*t.x:(this.x*=t,this.y*=t,this)},t.prototype.div=function(t){return this.x/="object"==typeof t?t.x||1:t||1,this.y/="object"==typeof t?t.y||1:t||1,this},t.prototype.mag=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.normalise=function(){var t=this.mag();return t&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.setMag=function(t){return this.normalise(),this.x*=t,this.y*=t,this},t.prototype.update=function(t,i){return this.x=t,this.y=i,this},t.prototype.get=function(){return new t(this.x,this.y)},t.prototype.limit=function(t){var i=this.mag();return this.x=p(this.x,0,i,0,t)||this.x,this.y=p(this.y,0,i,0,t)||this.y,this},t.prototype.angle=function(t){var i=this.get().abc(t),e=0;return i.x?e=Math.acos(i.x/i.mag())*(180/Math.PI):i.y&&(e=Math.asin(i.y/i.mag())*(180/Math.PI)),this.y-t.y<0&&this.x-t.x<0&&(e+=2*(180-e)),this.y-t.y<0&&this.x-t.x>0&&(e=360-e),e},t}();function l(t,i,e,s){return Math.sqrt(Math.pow(e-t,2)+Math.pow(s-i,2))}function p(t,i,e,s,o){return 100*(t-i)/(e-i)*(o-s)/100+s}function a(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s,o=e?function(t){return parseFloat(t)}:function(t){return Math.floor(t)};if("object"!=typeof t&&t<i){var h=i;i=t,t=h}var n=i<0&&(i||1),r=t<0&&(t||1);if(t="object"!=typeof t?Math.abs(t):t,i=Math.abs(i),!t)return 0;if("object"==typeof t)s=t[a(t.length-1)];else if(!r&&!n||r&&n){for(;!((s=o(Math.random()*(t+1)+i))<=t&&s>=i););r&&n&&(s*=-1)}else if(r&&0==i)s=-1*o(Math.random()*(t+1));else if(!r&&n){var l=a(t,void 0,e),p=a(i,void 0,e);s=a(1)?l:-p}return s}const u=function(){function i(t,i){void 0===t&&(t="div"),this.initParent(i&&i.parent),"object"==typeof this.parent?(this.elm=document.createElement(t),this.elm.style.opacity="1",this.parent.appendChild(this.elm)):this.elm=document.querySelector(this.parent),"input"==t&&this.elm.setAttribute("type","text"),this.isCircle=!1,this.x=0,this.y=0,this._width=0,this._height=0}return i.prototype.initParent=function(e){void 0===e&&(e=null),this.parent=e||(t instanceof i?t.elm:document.body)},i.prototype.elmType=function(){return this.elm instanceof HTMLDivElement?"div":this.elm instanceof HTMLInputElement?"input":null},i.prototype.style=function(t){return window.getComputedStyle(this.elm).getPropertyValue(t)},i.prototype.hide=function(){return this.elm.style.display="none",this},i.prototype.show=function(){return this.elm.style.display="block",this},i.prototype.text=function(t,i,e,s){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===e&&(e=null),void 0===s&&(s=null),this.elm instanceof HTMLInputElement?this.elm.value=t:this.elm.innerText=t,i&&(this.elm.style.color=i),e&&(this.elm.style.fontSize="number"==typeof e?e+"px":e),s&&(this.elm.style.textAlign=s),t||i||e||s?this:{value:this.elm instanceof HTMLInputElement?this.elm.value:this.elm.innerText,color:this.elm.style.color||void 0,size:this.elm.style.fontSize||void 0,dir:this.elm.style.textAlign||void 0}},i.prototype.bg_color=function(t){return t?(this.elm.style.background=t,this):this.elm.style.background},i.prototype.width=function(){return this._width},i.prototype.setWidth=function(t,i,e){var s=this;if(void 0===i&&(i=null),void 0===e&&(e="px"),t&&!i)return this.elm.style.width="number"==typeof t?t+"px":t,this._width=this.elm.offsetWidth,this;if(t&&i){var o=this.style("transition");this.elm.style.transition="none";var h=parseFloat(this.elm.style.width),n=50*(t-h)/i;return new Promise((function(i,r){var l=function(){h+=n;try{if(Math.floor(h)>Math.floor(t)&&n>0||Math.floor(h)<Math.floor(t)&&n<0)return s.elm.style.transition=o,i(s),!0;s.elm.style.width=h+e,s._width=s.elm.offsetWidth,setTimeout(l,50)}catch(t){r(t)}};l()}))}},i.prototype.height=function(){return this._height},i.prototype.setHeight=function(t,i,e){var s=this;if(void 0===i&&(i=null),void 0===e&&(e="px"),t&&!i)return this.elm.style.height="number"==typeof t?t+"px":t,this._height=this.elm.offsetHeight,this;if(t&&i){var o=this.style("transition");this.elm.style.transition="none";var h=parseFloat(this.elm.style.height),n=50*(t-h)/i;return new Promise((function(i,r){var l=function(){h+=n;try{if(Math.floor(h)>Math.floor(t)&&n>0||Math.floor(h)<Math.floor(t)&&n<0)return s.elm.style.transition=o,i(s),!0;s.elm.style.height=h+e,s._height=s.elm.offsetHeight,setTimeout(l,50)}catch(t){r(t)}};l()}))}},i.prototype.size=function(t,i){return void 0===t&&(t=0),i||(i=t),this.elm.style.width="number"==typeof t?t+"px":t,this.elm.style.height="number"==typeof i?i+"px":i,this._width=this.elm.offsetWidth,this._height=this.elm.offsetHeight,this},i.prototype.border=function(t,i,e){var s=this;if("object"==typeof e)e.forEach((function(e){var o="";1==e?o="-top":4==e?o="-left":3==e?o="-bottom":2==e&&(o="-right"),s.elm.style["border"+o]=("number"==typeof t?t+"px":t)+" solid "+i}));else{var o="";1==e?o="-top":4==e?o="-left":3==e?o="-bottom":2==e&&(o="-right"),this.elm.style["border"+o]=("number"==typeof t?t+"px":t)+" solid "+i}return this},i.prototype.circle=function(){return this.isCircle=!0,this.elm.style.borderRadius="200em",this},i.prototype.free=function(){return this.elm.style.position="absolute",this},i.prototype.box=function(){return this.elm.style.overflow="hidden",this},i.prototype.top=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=0),!1===t?this.y:"number"==typeof t?(this.y=t+(i?this.y:0),n(this.elm,"translate",this.x+"px,"+this.y+"px"),this):void 0},i.prototype.left=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=0),!1===t?this.x:"number"==typeof t?(this.x=t+(i?this.x:0),n(this.elm,"translate",this.x+"px,"+this.y+"px"),this):void 0},i.prototype.center=function(t){var i=this.height(),e=this.width();return this.top(t.height()/2-i/2),this.left(t.width()/2-e/2),this},i.prototype.rotate=function(t){return n(this.elm,"rotate",t+"deg"),this},i.prototype.axe_center=function(t){return void 0===t&&(t=null),this.elm.style.transformOrigin=t||"0 0",this},i.prototype.attr=function(t,i){return void 0===i&&(i=null),i?(this.elm.setAttribute(t,i),this):this.elm.getAttribute(t)},i.prototype.onclick=function(t){var i=this;this.elm.addEventListener("click",(function(){return t(i)}))},i.prototype.ondclick=function(t){var i=this;this.elm.addEventListener("ondblclick",(function(){return t(i)}))},i.prototype.onmouseout=function(t){var i=this;this.elm.addEventListener("onmouseleave",(function(){return t(i)}))},i.prototype.onchange=function(t){var i=this;this.elm.addEventListener("onchange",(function(){return t(i)}))},i.prototype.remove=function(){this.elm.remove()},i}();var c,f,y=function(){function i(i,e,s){void 0===e&&(e=0);var o=s.c,h=void 0===o?"#000":o,n=s.r,l=void 0===n?0:n;"object"==typeof i?(this.r=i.r||l,this.pos=i.pos.get(),this.color=i.color||h):(this.r=l,this.pos=new r(i,e),this.color=h),this.zoom=!0,this.parent=new Array,this.use=!0,this.r>0&&(this.elm=new u("div",{parent:t.elm}),this.elm.free().top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2),this.elm.circle().size(this.r,this.r).bg_color(this.color))}return i.prototype.update=function(t){if(this.pos.x=t[0]||1,this.pos.y=t[1]||1,this.pos.x=this.pos.x,this.pos.y=this.pos.y,this.elm&&(this.elm.top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2)),this.parent)for(var i=0;i<this.parent.length;i++)this.parent[i].update()},i.prototype.state=function(t,i,e,s){void 0===t&&(t=!1),void 0===e&&(e=0),void 0===s&&(s="#000"),this.use=t,t?(this.pos.x=i,this.pos.y=e,this.color=s,this.pos.x=i,this.pos.y=e,this.parent=new Array,this.r>0&&(this.elm.elm.style.display="block",this.elm.top(this.pos.y-this.r/2),this.elm.left(this.pos.x-this.r/2),this.elm.bg_color(this.color))):(this.elm.top(0),this.elm.left(0),this.elm.elm.style.display="none")},i}();!function(){function i(i,e,s,o){void 0===s&&(s=0),void 0===o&&(o="#000"),this.object,this.spot1=i,this.spot2=e,this.spot1.parent.push(this),this.spot2.parent.push(this),this.size=s,this.color=o,this.length=l(this.spot1.pos.x,this.spot1.pos.y,this.spot2.pos.x,this.spot2.pos.y),this.angle=0,this.axe=this.spot1.pos.mag()>this.spot2.pos.mag()?this.spot2:this.spot1,this.AntiAxe=this.axe==this.spot1?this.spot2:this.spot1,this.calc_angle(),this.size&&(this.elm=new u("div",{parent:t.elm}),this.elm.free().top(this.axe.pos.y+this.axe.r/2-this.size/2),this.elm.left(this.axe.pos.x+this.axe.r/2-this.size/2),this.elm.size(this.length,this.size).bg_color(this.color),this.elm.axe_center().rotate(this.angle))}i.prototype.calc_angle=function(){this.length=l(this.spot1.pos.x,this.spot1.pos.y,this.spot2.pos.x,this.spot2.pos.y),this.angle=this.AntiAxe.pos.angle(this.axe.pos)},i.prototype.update=function(){this.calc_angle(),this.size&&(this.elm.free().top(this.axe.pos.y+this.axe.r/2-this.size/2),this.elm.left(this.axe.pos.x+this.axe.r/2-this.size/2),this.elm.size(this.length,this.size).bg_color(this.color),this.elm.axe_center().rotate(this.angle))},i.prototype.width=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=0),i&&(t+=this.length),e)s=Math.cos(180-(this.angle*(Math.PI/180)+90))*t,o=Math.sin(180-(this.angle*(Math.PI/180)+90))*t,this.spot1.update([s,o]);else{var s=Math.cos(this.angle*(Math.PI/180))*t+this.spot1.pos.x,o=Math.sin(this.angle*(Math.PI/180))*t+this.spot1.pos.y;this.spot2.update([s,o])}this.length=t},i.prototype.rotate=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=this.axe),void 0===e&&(e=0),"number"==typeof i&&(i=1==i?this.axe:this.AntiAxe);var s=i==this.axe?this.AntiAxe:this.axe;this.calc_angle(),e&&(t+=this.angle),i==this.AntiAxe&&(t+=180);var o=t*(Math.PI/180),h=Math.cos(o)*this.length,n=Math.sin(o)*this.length;this.angle=t,s.update([h+i.pos.x,n+i.pos.y])},i.prototype.remove=function(){this.elm.remove()}}(),function(){function i(t,i,e,s,o){this.elm=null,this.angle=null,"object"==typeof t?(this.pos=t,this.w=i,this.h=e,"string"==typeof s&&(this.color=s)):(this.pos=new r(t,i),this.w=e,"number"==typeof s&&(this.h=s),this.color=o),this.color&&this.show()}i.prototype.show=function(){this.elm=new u("div",{parent:t.elm}),this.elm.free().top(this.pos.y-this.h/2),this.elm.left(this.pos.x-this.w/2),this.elm.axe_center(this.w/2+"px "+this.h/2+"px"),this.elm.border(this.w/2,"transparent",[2,4]).border(this.h,this.color,[3])},i.prototype.update=function(t){this.calc_angle(t),this.elm&&this.elm.rotate(this.angle),this.pos.x=t[0],this.pos.y=t[1],this.elm&&(this.elm.top(this.pos.y-this.h/2||0),this.elm.left(this.pos.x-this.w/2||0))},i.prototype.calc_angle=function(t){var i=new r(t[0],t[1]);if((i=this.pos.get().abc(i.get())).mag()){var e=Math.abs(Math.acos(i.y/i.mag())*(180/Math.PI));t[0]-this.pos.x<0&&(e=360-e),this.angle=e}}}(),function(t,i){document.addEventListener("DOMContentLoaded",(function(e){var n;t(),o(i),h(60),n=function(t){27==t&&s()},window.addEventListener("keydown",(function(t){return n(t.keyCode||t.which)}))}))}((function(){f=function(i,e){void 0===e&&(e="#fff");var s=new u;return s.free(),s.box(),s.bg_color(e),"object"==typeof i?s.size(i[0],i[1]):i?s.size(i,i):s.size("100%","100%"),function(i){t=i}(s),s}(),c=new Array(100).fill(null).map((function(t){return new y(a(f._width),a(f._height),{r:10,c:"red"})}))}),(function(){h(5),c.forEach((function(t){t.update([a(f._width),a(f._height)])}))}))})();